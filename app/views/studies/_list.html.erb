
<table class="table table-striped table-hover">
  <tr>
    <th><%= sortable "name" %></th>
    <th><%= sortable "question", "Which place looks..." %></th>
    <!-- add check here for admin? -->
    <th><%= sortable "user_id", "User" %></th>
    <th>Image Set</th>
    <th>Votes</th>
    <th><%= sortable "active", "Status" %></th>
</tr>    
<% @studies.each do |study| %>
  <tr>
    <!-- only show draft studies to logged in owners -->
    <% if study.active.nil? %>
      <% if user_signed_in? && study.user_id == current_user.id %>
        <td><%= link_to study.name, url_for(:controller => "studies", :action => "vote", :id => study) %></td>
        <td><%= link_to study.question, study %>?</td>
        <td><%= study.user_id %></td>
        <td><%= study.region_set ? link_to(study.region_set.name, study.region_set) + ' (' + study.region_set.regions.count.to_s + ')' : '' %></td>
        <td><%= study.comparisons.count %></td>
        <td><span class="label label-warning">Not Launched</span></td>
      <% end %>
    <% elsif study.active %>
      <td><%= link_to study.name, url_for(:controller => "studies", :action => "vote", :id => study) %></td>
      <td><%= link_to study.question, study %>?</td>
      <td><%= study.user_id %></td>
      <td><%= study.region_set ? link_to(study.region_set.name, study.region_set) + ' (' + study.region_set.regions.count.to_s + ')' : '' %></td>
      <td><%= study.comparisons.count %></td>
      <td><span class="label label-success">Open</span></td>
    <% else %>
      <td><%= link_to study.name, url_for(:controller => "studies", :action => "vote", :id => study) %></td>
      <td><%= link_to study.question, study %>?</td>
      <td><%= study.user_id %></td>
      <td><%= study.region_set ? link_to(study.region_set.name, study.region_set) + ' (' + study.region_set.regions.count.to_s + ')' : '' %></td>
      <td><%= study.comparisons.count %></td>
      <td><span class="label label-important">Closed</span></td>
    <% end %>
  </tr>
<% end %>
</table>
